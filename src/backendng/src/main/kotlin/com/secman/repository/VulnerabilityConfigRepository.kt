package com.secman.repository

import com.secman.domain.VulnerabilityConfig
import io.micronaut.data.annotation.Query
import io.micronaut.data.annotation.Repository
import io.micronaut.data.jpa.repository.JpaRepository

/**
 * Repository for VulnerabilityConfig entity.
 *
 * This repository manages the singleton vulnerability configuration record.
 * In practice, there should only ever be one record in this table.
 *
 * Related to: Feature 021-vulnerability-overdue-exception-logic
 */
@Repository
interface VulnerabilityConfigRepository : JpaRepository<VulnerabilityConfig, Long> {
    
    /**
     * Find the first (and only) configuration record by ID.
     * Used to implement singleton pattern for vulnerability configuration.
     *
     * @return The vulnerability configuration, or null if none exists
     */
    @Query("SELECT v FROM VulnerabilityConfig v ORDER BY v.id ASC")
    fun findFirstConfig(): VulnerabilityConfig?
}
