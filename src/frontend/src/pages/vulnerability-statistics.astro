---
/**
 * Vulnerability Statistics Lense Page
 *
 * Main dashboard for vulnerability analytics displaying:
 * - Most common vulnerabilities (US1)
 * - Severity distribution pie chart (US2)
 * - Top assets by vulnerability count (US3)
 * - Vulnerabilities by asset type (US3)
 * - Temporal trends line chart (US4)
 *
 * Feature: 036-vuln-stats-lense
 * Task: T017 [US1]
 * Spec reference: spec.md Section "User Scenarios & Testing"
 */

import Layout from '../layouts/Layout.astro';
import MostCommonVulnerabilities from '../components/statistics/MostCommonVulnerabilities';
import SeverityDistributionChart from '../components/statistics/SeverityDistributionChart';
import TopAssetsByVulnerabilities from '../components/statistics/TopAssetsByVulnerabilities';
import VulnerabilityByAssetType from '../components/statistics/VulnerabilityByAssetType';
import TemporalTrendsChart from '../components/statistics/TemporalTrendsChart';
---

<Layout title="Vulnerability Statistics - Lense">
  <div class="container-fluid py-4">
    <!-- Page Header -->
    <div class="row mb-4">
      <div class="col-12">
        <h1 class="display-5">
          <i class="bi bi-bar-chart-line me-2"></i>
          Vulnerability Statistics Lense
        </h1>
        <p class="text-muted">
          Comprehensive vulnerability analytics and trends across your accessible assets
        </p>
      </div>
    </div>

    <!-- User Story 1: Most Common Vulnerabilities (P1/MVP) -->
    <div class="row mb-4">
      <div class="col-12">
        <MostCommonVulnerabilities client:load />
      </div>
    </div>

    <!-- User Story 2: Severity Distribution (P2) -->
    <div class="row mb-4">
      <div class="col-12 col-lg-6">
        <SeverityDistributionChart client:load />
      </div>

      <!-- User Story 3: Top Assets (P3) -->
      <div class="col-12 col-lg-6">
        <TopAssetsByVulnerabilities client:load />
      </div>
    </div>

    <!-- User Story 3: Vulnerabilities by Asset Type (P3) -->
    <div class="row mb-4">
      <div class="col-12">
        <VulnerabilityByAssetType client:load />
      </div>
    </div>

    <!-- User Story 4: Temporal Trends (P4) -->
    <div class="row mb-4">
      <div class="col-12">
        <TemporalTrendsChart client:load />
      </div>
    </div>
  </div>
</Layout>
