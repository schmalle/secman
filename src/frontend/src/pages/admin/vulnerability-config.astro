---
import Layout from '../../layouts/Layout.astro';
import VulnerabilityConfigForm from '../../components/VulnerabilityConfigForm';
import VulnerabilityExceptionsTable from '../../components/VulnerabilityExceptionsTable';
---

<Layout title="Vulnerability Settings - Admin">
    <div class="container-fluid">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/">Home</a></li>
                <li class="breadcrumb-item"><a href="/admin">Admin</a></li>
                <li class="breadcrumb-item active" aria-current="page">Vulnerability Settings</li>
            </ol>
        </nav>

        <!-- Tabbed Interface -->
        <ul class="nav nav-tabs mb-4" id="vulnConfigTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button 
                    class="nav-link active" 
                    id="settings-tab" 
                    data-bs-toggle="tab" 
                    data-bs-target="#settings" 
                    type="button" 
                    role="tab" 
                    aria-controls="settings" 
                    aria-selected="true"
                >
                    <i class="bi bi-gear me-2"></i>
                    Threshold Settings
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button 
                    class="nav-link" 
                    id="exceptions-tab" 
                    data-bs-toggle="tab" 
                    data-bs-target="#exceptions" 
                    type="button" 
                    role="tab" 
                    aria-controls="exceptions" 
                    aria-selected="false"
                >
                    <i class="bi bi-shield-exclamation me-2"></i>
                    Exception Management
                </button>
            </li>
        </ul>

        <div class="tab-content" id="vulnConfigTabContent">
            <!-- Threshold Settings Tab -->
            <div 
                class="tab-pane fade show active" 
                id="settings" 
                role="tabpanel" 
                aria-labelledby="settings-tab"
            >
                <VulnerabilityConfigForm client:load />
            </div>

            <!-- Exception Management Tab -->
            <div 
                class="tab-pane fade" 
                id="exceptions" 
                role="tabpanel" 
                aria-labelledby="exceptions-tab"
            >
                <VulnerabilityExceptionsTable client:load />
            </div>
        </div>

        <div class="mt-4">
          <a href="/admin" class="btn btn-secondary">Back to Admin</a>
        </div>
    </div>
</Layout>
