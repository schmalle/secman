micronaut:
  application:
    name: secman-cli
  http:
    client:
      # Increase timeouts for long-running CrowdStrike API queries
      read-timeout: 120s       # 2 minutes read timeout (was default 10s)
      connect-timeout: 30s     # 30 seconds connection timeout
      pool:
        enabled: true
        max-connections: 20    # Allow up to 20 concurrent connections

secman:
  backend:
    base-url: ${SECMAN_BACKEND_URL:http://localhost:8080}
  crowdstrike:
    batch-size: ${SECMAN_CROWDSTRIKE_BATCH_SIZE:25}
    max-parallel-batches: ${SECMAN_CROWDSTRIKE_MAX_PARALLEL_BATCHES:4}

# Database configuration (required for EntityManager/JPA support)
# CLI needs access to the same database as the backend to use backend services
datasources:
  default:
    url: ${DB_CONNECT:jdbc:mariadb://localhost:3306/secman}
    driverClassName: org.mariadb.jdbc.Driver
    username: ${DB_USERNAME:secman}
    password: ${DB_PASSWORD:CHANGEME}
    maximum-pool-size: 10
    minimum-idle: 2

jpa:
  default:
    properties:
      hibernate:
        hbm2ddl:
          auto: update
        show_sql: false
        format_sql: true

# Logging configuration
logger:
  levels:
    com.secman.cli: INFO
    io.micronaut.http.client: WARN
    io.micronaut.security: DEBUG
    org.hibernate.orm.incubating: ERROR
